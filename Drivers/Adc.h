/*******************************************************Copyright*********************************************************
**                                            北京博创兴盛机器人技术有限公司
**                                                       研发部
**                                               http://robot.up-tech.com
**
**-------------------------------------------------------文件信息---------------------------------------------------------
** 文件名称:			Adc.h
** 最后修订日期:		2009-03-17
** 最后版本:			1.0
** 描述:				使用外部基准源的模拟数字装换单元(API)
**
**------------------------------------------------------------------------------------------------------------------------
** 创建人:			律晔
** 创建日期:			2008-03-17
** 版本:				1.0
** 描述:				使用16位TIMER的快速PWM模式实现8路PPM控制(API)
**
**------------------------------------------------------------------------------------------------------------------------
** 修订人:
** 修订日期:
** 版本:
** 描述:
**
**------------------------------------------------------------------------------------------------------------------------
** 修订人:
** 修订日期:
** 版本:
** 描述:
**
*************************************************************************************************************************/
#ifndef ADC_H_
#define ADC_H_

#include "ConfigTypes.h"


#define		ADC_GLOBALS

#ifndef   ADC_GLOBALS
     #define ADC_EXT     
#else 
     #define ADC_EXT  extern
#endif 


/*************************************************************************************************************************
														硬件定义
*************************************************************************************************************************/
#define ADC_PORT				PORTF											// 定义ADC输入所使用的端口数据寄存器
#define ADC_DDR					DDRF											// 定义ADC输入所使用的端口方向寄存器

#define ADC_ADMUX				ADMUX
#define ADC_ADCSRA				ADCSRA
#define ADC_ADC_L				ADCL
#define ADC_ADC_H				ADCH

#define ADC_MUX_MASK			0b00011111

#define ADC_EN					0b10000000										// 启用ADC，单次模式，中断不使能
#define ADC_PRESCALER			0b00000111										// 分频位，设置为128分频

#define ADC_REFERENCE			0b00000000										// AREF， 内部Vref关闭


/*************************************************************************************************************************
														结构体定义
*************************************************************************************************************************/
typedef struct
{	
	uint8 state;
	uint8 channel;
	uint8 mapping[8];
	uint16 adc_value_buffer[8]; 							//AD数据缓冲数组，数组号代表通道号
	
	tVoidVoid* pInit;
	tVoidUint8* pStartConvert;
	tUint8Puint16* pGetRegValue;
	tUint8Uint8Puint16* pGetValue;
	
}ADC_CONTROL_STRUCT;


/*************************************************************************************************************************
														 控制结构体声明
*************************************************************************************************************************/
ADC_EXT ADC_CONTROL_STRUCT adc_control;


/*************************************************************************************************************************
														函数声明
*************************************************************************************************************************/


#endif
/*************************************************************************************************************************
**                                                      文件结束
*************************************************************************************************************************/
